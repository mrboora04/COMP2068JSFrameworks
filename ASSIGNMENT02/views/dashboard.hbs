<h1>Dashboard</h1>
<p>Welcome, {{user.username}}! Here are your assignments:</p>

<!-- Search form -->
<form method="GET" action="/dashboard" class="mb-4">
  <div class="input-group">
    <input type="text" name="search" class="form-control" placeholder="Search by title" value="{{search}}">
    <button type="submit" class="btn btn-primary">Search</button>
  </div>
</form>

<!-- Export button -->
<a href="/export" class="btn btn-info mb-4">Export to CSV</a>

<!-- Assignments as cards -->
<div class="row">
  {{#each assignments}}
    <div class="col-md-4 mb-4">
      <div class="card h-100 {{#if (eq priority 'High')}}border-danger{{else if (eq priority 'Medium')}}border-warning{{else}}border-success{{/if}}">
        <div class="card-body d-flex">
          <div class="flex-grow-1">
            <h5 class="card-title">{{title}}</h5>
            <p class="card-text">
              <strong>Due:</strong> {{formatDate dueDate}}<br>
              <strong>Priority:</strong> {{priority}}<br>
              <strong>Category:</strong> {{category}}<br>
              <strong>Weight:</strong> {{weight}}%
            </p>
            <a href="/edit/{{_id}}" class="btn btn-sm btn-primary me-2">
              <i class="bi bi-pencil"></i> Edit
            </a>
            <a href="/delete/{{_id}}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this assignment?')">
              <i class="bi bi-trash"></i> Delete
            </a>
          </div>
          <div class="ms-3" style="width: 30px;">
            <div class="progress h-100">
              <div class="progress-bar {{#if completed}}bg-success{{else}}bg-secondary{{/if}}" role="progressbar" style="width: 100%" aria-valuenow="{{#if completed}}100{{else}}0{{/if}}" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  {{else}}
    <div class="col-12">
      <p class="text-muted">No assignments found. Add one below!</p>
    </div>
  {{/each}}
</div>

<!-- Add assignment button -->
<a href="/add" class="btn btn-success mt-3">Add New Assignment</a>

<!-- Custom styles for visual flair -->
<style>
  .card {
    transition: transform 0.2s;
  }
  .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  .border-danger { border-left: 5px solid #dc3545; }
  .border-warning { border-left: 5px solid #ffc107; }
  .border-success { border-left: 5px solid #28a745; }
  .progress { height: 100%; width: 30px; }
  .progress-bar { transition: background-color 0.3s; }
</style>