<h2>Assignment Calendar</h2>
<div class="timeline">
  {{#each assignments}}
    <div class="timeline-item" data-gif="/images/priority-{{priority}}.gif" data-title="{{title}}">
      <div class="timeline-date">{{formatDate dueDate}}</div>
      <div class="timeline-content">
        <h3>{{title}}</h3>
        <p>Progress: {{progress}}%</p>
        <p>Priority: <span class="priority-{{priority}}">{{priority}}</span></p>
      </div>
    </div>
  {{else}}
    <div class="timeline-item">
      <div class="timeline-date">N/A</div>
      <div class="timeline-content">
        <p>No assignments yet</p>
      </div>
    </div>
  {{/each}}
</div>
<div id="priority-popup" class="priority-popup">
  <div class="popup-content">
    <h3 id="popup-title"></h3>
    <img id="popup-gif" src="" alt="Priority meme">
  </div>
</div>
<a href="/dashboard">Back to Dashboard</a>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const items = document.querySelectorAll('.timeline-item');
    const popup = document.getElementById('priority-popup');
    const popupTitle = document.getElementById('popup-title');
    const popupGif = document.getElementById('popup-gif');

    if (items.length === 0) return;

    let currentIndex = 0;

    function showPopup(index) {
      if (index >= items.length) {
        popup.style.display = 'none';
        return;
      }

      const item = items[index];
      const title = item.getAttribute('data-title');
      const gif = item.getAttribute('data-gif');

      popupTitle.textContent = title;
      popupGif.src = gif;
      popup.style.display = 'block';

      setTimeout(() => {
        popup.style.display = 'none';
        showPopup(index + 1);
      }, 5000); // 5 seconds
    }

    showPopup(0);
  });
</script>