<h1>Calendar</h1>
<h2>Upcoming (Next 7 Days)</h2>
{{#if upcomingAssignments.length}}
  <div class="row">
    {{#each upcomingAssignments}}
      <div class="col-md-4 mb-3">
        <div class="card {{urgencyClass dueDate}}">
          <div class="card-body">
            <h5>{{title}}</h5>
            <p><strong>Due:</strong> {{formatDate dueDate}}</p>
            <p><strong>Days Left:</strong> {{daysUntilDue dueDate}}</p>
            <ul class="list-group mb-2">
              {{#each todos}}
                <li class="list-group-item {{#if completed}}text-muted{{/if}}">{{task}}</li>
              {{/each}}
            </ul>
            <form method="POST" action="/calendar/{{_id}}/add-todo" class="d-flex">
              <input type="text" name="task" class="form-control me-2" placeholder="Add to-do" required>
              <button type="submit" class="btn btn-primary btn-sm">Add</button>
            </form>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
{{else}}
  <div class="alert alert-info">No upcoming assignments.</div>
{{/if}}

<h2>All Assignments</h2>
{{#if allAssignments.length}}
  <div class="row">
    {{#each allAssignments}}
      <div class="col-md-4 mb-3">
        <div class="card {{urgencyClass dueDate}}">
          <div class="card-body">
            <h5>{{title}}</h5>
            <p><strong>Due:</strong> {{formatDate dueDate}}</p>
            <a href="/edit/{{_id}}" class="btn btn-outline-primary btn-sm">Edit</a>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
{{else}}
  <div class="alert alert-info">No assignments found.</div>
{{/if}}

<a href="/dashboard" class="btn btn-primary mt-3">Back to Dashboard</a>